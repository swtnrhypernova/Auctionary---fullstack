
> auctionary_starter@1.0.0 test
> mocha ./tests/test.*.js --reporter spec --log-level=warn --timeout 10000



  Test successful creation of users
[Script: test.a.user.creation.js]
    ✔ Should return 201, and JSON with user_id of new user: dkells0@gmail.com (138ms)
    ✔ Should return 201, and JSON with user_id of new user: jmorston1@gmail.com (98ms)
    ✔ Should return 201, and JSON with user_id of new user: rgiovanardi2@gmail.com (98ms)
    ✔ Should return 201, and JSON with user_id of new user: bissit3@gmail.com (97ms)
    ✔ Should return 201, and JSON with user_id of new user: eondricek4@gmail.com (105ms)
    ✔ Should return 201, and JSON with user_id of new user: ldowding5@gmail.com (100ms)
    ✔ Should return 201, and JSON with user_id of new user: llindfors6@gmail.com (107ms)
    ✔ Should return 201, and JSON with user_id of new user: rlavalde7@gmail.com (99ms)
    ✔ Should return 201, and JSON with user_id of new user: sstivani8@gmail.com (104ms)
    ✔ Should return 201, and JSON with user_id of new user: fdeehan9@gmail.com (96ms)

  Test malformed creation of users
[Script: test.a.user.creation.js]
    ✔ Should return a 400 status code: Test blank first_name
    ✔ Should return a 400 status code: Test blank last_name
    ✔ Should return a 400 status code: Test blank email
    ✔ Should return a 400 status code: Test blank password
    ✔ Should return a 400 status code: Test duplicate email
    ✔ Should return a 400 status code: Test password too short
    ✔ Should return a 400 status code: Test password too long
    ✔ Should return a 400 status code: Test password without numbers
    ✔ Should return a 400 status code: Test password without special character
    ✔ Should return a 400 status code: Test password without upper case character
    ✔ Should return a 400 status code: Test password without lower case character
    ✔ Should return 400 status code: missing first name
    ✔ Should return 400 status code: missing last name
    ✔ Should return 400 status code: missing email
    ✔ Should return 400 status code: missing password
    ✔ Should return 400 status code: extra field

  Test user login/logout
[Script: test.b.authentication.js]
    ✔ Should return 200 status code for successful login (96ms)
    ✔ Should return the same token if a logged in user tried to login again (96ms)
    ✔ Should return 400 status code for incorrect email
    ✔ Should return 400 status code for incorrect password (107ms)
    ✔ Should return 400 status code for missing password
    ✔ Should return 400 status code for missing email
    ✔ Should return 400 status code for extra field
    ✔ Should return 401 status code for logging out user not logged in
    ✔ Should return 200 status code for logging out user who is logged in

  Test adding items if not logged in
[Script: test.c.auction.creation.js]
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401
    ✔ Should return 401

  Log into account.
[Script: test.c.auction.creation.js]
    ✔ Should return 200, and JSON with user_id and session_token (98ms)

  Test successful creation of items when logged in
[Script: test.c.auction.creation.js]
    ✔ Should return 201, and JSON with item_id of new item: Stylish patterned knit scarf.
    ✔ Should return 201, and JSON with item_id of new item: Bartender kit with shaker, jigger, and strainer.
    ✔ Should return 201, and JSON with item_id of new item: Barely used lawn mower.
    ✔ Should return 201, and JSON with item_id of new item: Chewy snack bars with coconut and almonds coated in chocolate.
    ✔ Should return 201, and JSON with item_id of new item: Stylish smartwatch with fitness tracking and notifications.
    ✔ Should return 201, and JSON with item_id of new item: Sweet and crunchy honey-flavored crackers.
    ✔ Should return 201, and JSON with item_id of new item: Pure maple syrup for pancakes and more.
    ✔ Should return 201, and JSON with item_id of new item: Infuser for brewing loose-leaf herbal teas easily.
    ✔ Should return 201, and JSON with item_id of new item: UV-blocking clothing for outdoor activities.
    ✔ Should return 201, and JSON with item_id of new item: Crunchy granola with almonds and a hint of vanilla, perfect for breakfast.

  Test creation of events when logged in which should not pass validation checks
[Script: test.c.auction.creation.js]
    ✔ Should return 400 status code: missing name
    ✔ Should return 400 status code: missing description
    ✔ Should return 400 status code: missing starting_bid
    ✔ Should return 400 status code: missing end_date
    ✔ Should return 400 status code: extra field
    ✔ Should return a 400 status code: Test blank name
    ✔ Should return a 400 status code: Test blank description
    ✔ Should return a 400 status code: Test blank starting bid
    ✔ Should return a 400 status code: Test blank end_date
    ✔ Should return a 400 status code: Test negative starting_bid
    ✔ Should return a 400 status code: Test end date in the past
    ✔ Should return a 400 status code: Test invalid start

  Bidding on an auction when not authenticated
[Script: test.d.bidding.js]
    ✔ Should return a 401

  Log into user account
[Script: test.d.bidding.js]
    ✔ Should return 200, and JSON with user_id and session_token of the user (93ms)
    ✔ Should return 200, and JSON with user_id and session_token of the user (97ms)

  Test bidding when logged in which should not pass validation checks
[Script: test.d.bidding.js]
    ✔ Should return 400 status code: extra field
    ✔ Should return 400 status code: blank amount
    ✔ Should return 400 status code: invalid amount
    ✔ Should return 400 status code: amount less or equal than current bid (3595)

  Test bidding in situations that should fail
[Script: test.d.bidding.js]
    ✔ Should return 403 status code: can not bid on own items
    ✔ Should return 404 status code: item does not exist

  Test bidding success
[Script: test.d.bidding.js]
    ✔ Should return 201 status code
    ✔ Should return 201 status code

  Getting bid history of an auction that does not exist
    ✔ Should return 404

  Getting bid history of an auction with no bids
    ✔ Should return 200 but with an empty list

  Getting bid history of an auction with bids
    ✔ Should return 200 with two bids

  Getting item details of an auction that does not exist
    ✔ Should return 404

  Getting item details of an auction with no bids
    ✔ Should return 200 but with an empty bid holder

  Getting item details of an auction with bids
    ✔ Should return 200 but with a bid holder

  Getting user details of a user that does not exist
    ✔ Should return 404

  Getting user details of a user with no items or bids
    ✔ Should return 200 but with empty lists

  Getting user details of a user with items but no bids
    ✔ Should return 200

  Getting user details of a user with no items but bids
    ✔ Should return 200

  Test asking question if not logged in
[Script: test.h.auction.questions.js]
    ✔ Should return 401

  Log into account.
[Script: test.h.auction.questions.js]
    ✔ Should return 200, and JSON with user_id and session_token (93ms)
    ✔ Should return 200, and JSON with user_id and session_token (88ms)

  Test asking questions if logged in
[Script: test.h.auction.questions.js]
    ✔ Should return 200 - user 2 asking a question on item 1
    ✔ Should return 200 - user 2 asking a question on item 1
    ✔ Should return 403 - user 1 asking a question on item 1 as they are the creator
    ✔ Should return 400 if question is empty
    ✔ Should return 400 if question is missing
    ✔ Should return 400 if extra field is present
    ✔ Should return 404 if item does not exist

  Test answering questions
    ✔ Should return 401 if not logged in
    ✔ Should return 403 if user 2 trys to answer a question for an auction they did not create
    ✔ Should return 404 if the question does not exist
    ✔ Should return 400 if the answer is blank
    ✔ Should return 400 if the answer is missing
    ✔ Should return 400 if the answer contains an extra field
    ✔ Should return 200 if user 1 answers a question on item 1

  Test retrieving questions
    ✔ Should return 404 if the item does not exist
    ✔ Should return 200, but with an empty list if the item has no questions
    ✔ Should return 200, with 2 questions on item 1. One question should have an answer and new questions should appear first.

  Log into account.
[Script: test.i.search.js]
    ✔ Should return 200, and JSON with user_id and session_token (89ms)
    ✔ Should return 200, and JSON with user_id and session_token (92ms)

  Searching with no criteria, and no authentication, to test pagination.
    ✔ Should return 200, with an array of 10 objects
    ✔ Should return 200, with an array of 9 objects when offsetting by 1
    ✔ Should return 200, with an array of 8 objects when offsetting by 2
    ✔ Should return 200, with an array of 5 objects when limiting to 5
    ✔ Should return 200, with an array of 0 objects when limiting to 5 and offsetting by 10

  Searching by status
    ✔ Should return 400 if status is not recognised
    ✔ Should return 400 if status is BID but not authenticated
    ✔ Should return 400 if status is OPEN but not authenticated
    ✔ Should return 200 with 10 objects if status is OPEN and logged in as user1
    ✔ Should return 200 with 0 objects if status is OPEN and logged in as user2
    ✔ Should return 200 with 0 objects if status is BID and logged in as user1
    ✔ Should return 200 with 1 objects if status is BID and logged in as user2
    ✔ Should return 200 with 0 objects if status is ARCHIVE, logged in as user2

  Searching by query string
    ✔ Should return 200, with 6 objects when searching OPEN auctions with the string 'and' as user 1
    ✔ Should return 200, with 0 objects when searching OPEN auctions with the string 'and' as user 2
    ✔ Should return 200, with 1 objects when searching all items with the string 'uv'
    ✔ Should return 200, with 0 objects when searching all auctions with the string 'xxx'


  128 passing (2s)

